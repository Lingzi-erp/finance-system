# ğŸ“¦ è´¢åŠ¡ç³»ç»Ÿ - å‘å¸ƒæ›´æ–°æŒ‡å—

## ä¸€ã€é¦–æ¬¡è®¾ç½®ï¼ˆåªéœ€åšä¸€æ¬¡ï¼‰

### 1. åˆ›å»º GitHub ä»“åº“

1. æ‰“å¼€ https://github.com ç™»å½•
2. ç‚¹å‡»å³ä¸Šè§’ **+** â†’ **New repository**
3. å¡«å†™ï¼š
   - **Repository name**: `finance-system`
   - **Description**: è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ
   - é€‰æ‹© **Private**ï¼ˆç§æœ‰ï¼‰
4. ç‚¹å‡» **Create repository**
5. **è®°ä¸‹ä½ çš„ GitHub ç”¨æˆ·å**ï¼ˆä¾‹å¦‚ï¼š`zhangsan`ï¼‰

### 2. ä¿®æ”¹é…ç½®

æ‰“å¼€ `desktop/package.json`ï¼Œæ‰¾åˆ°æœ€åçš„ `publish` éƒ¨åˆ†ï¼ŒæŠŠ `YOUR_GITHUB_USERNAME` æ”¹æˆä½ çš„ GitHub ç”¨æˆ·åï¼š

```json
"publish": {
  "provider": "github",
  "owner": "zhangsan",        â† æ”¹æˆä½ çš„ç”¨æˆ·å
  "repo": "finance-system",
  "releaseType": "release"
}
```

### 3. åˆ›å»º GitHub Tokenï¼ˆç”¨äºå‘å¸ƒï¼‰

1. æ‰“å¼€ https://github.com/settings/tokens
2. ç‚¹å‡» **Generate new token (classic)**
3. å¡«å†™ï¼š
   - **Note**: `electron-updater`
   - **Expiration**: é€‰æ‹©æœ‰æ•ˆæœŸï¼ˆå»ºè®® No expirationï¼‰
   - **å‹¾é€‰æƒé™**: `repo` (å…¨éƒ¨)
4. ç‚¹å‡» **Generate token**
5. **ç«‹å³å¤åˆ¶ Token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰
6. ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹

### 4. è®¾ç½®ç¯å¢ƒå˜é‡

åœ¨ Windows ç³»ç»Ÿä¸­è®¾ç½® GitHub Tokenï¼š

æ–¹æ³•ä¸€ï¼šä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ç»ˆç«¯æœ‰æ•ˆï¼‰
```powershell
$env:GH_TOKEN = "ä½ çš„Token"
```

æ–¹æ³•äºŒï¼šæ°¸ä¹…è®¾ç½®
1. æœç´¢"ç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡"
2. ç‚¹å‡»"ç¯å¢ƒå˜é‡"
3. åœ¨ç”¨æˆ·å˜é‡ä¸­æ–°å»ºï¼š
   - å˜é‡åï¼š`GH_TOKEN`
   - å˜é‡å€¼ï¼šä½ çš„ Token

### 5. åˆå§‹åŒ– Git ä»“åº“

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š

```powershell
cd "D:\Cursoré¡¹ç›®\è´¢åŠ¡ç³»ç»Ÿ"
git init
git add .
git commit -m "åˆå§‹ç‰ˆæœ¬"
git branch -M main
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/finance-system.git
git push -u origin main
```

---

## äºŒã€å‘å¸ƒæ–°ç‰ˆæœ¬

æ¯æ¬¡è¦å‘å¸ƒæ›´æ–°æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### æ­¥éª¤ 1ï¼šæ›´æ–°ç‰ˆæœ¬å·

ä¿®æ”¹ `desktop/package.json` ä¸­çš„ç‰ˆæœ¬å·ï¼š

```json
"version": "1.0.1",   // ä» 1.0.0 æ”¹æˆ 1.0.1
```

ç‰ˆæœ¬å·è§„åˆ™ï¼š
- å°ä¿®å¤: 1.0.0 â†’ 1.0.1
- æ–°åŠŸèƒ½: 1.0.0 â†’ 1.1.0
- å¤§æ”¹åŠ¨: 1.0.0 â†’ 2.0.0

### æ­¥éª¤ 2ï¼šæ„å»ºå¹¶å‘å¸ƒ

åœ¨ `desktop` ç›®å½•æ‰§è¡Œï¼š

```powershell
cd "D:\Cursoré¡¹ç›®\è´¢åŠ¡ç³»ç»Ÿ\desktop"

# ç¡®ä¿ Token å·²è®¾ç½®
$env:GH_TOKEN = "ä½ çš„Token"

# æ„å»ºå¹¶å‘å¸ƒåˆ° GitHub
npm run dist -- --publish always
```

è¿™ä¼šè‡ªåŠ¨ï¼š
1. æ‰“åŒ…åº”ç”¨
2. ä¸Šä¼ åˆ° GitHub Releases
3. ç”Ÿæˆæ›´æ–°æ–‡ä»¶

### æ­¥éª¤ 3ï¼šæäº¤ä»£ç å˜æ›´

```powershell
cd "D:\Cursoré¡¹ç›®\è´¢åŠ¡ç³»ç»Ÿ"
git add .
git commit -m "å‘å¸ƒ v1.0.1"
git push
```

---

## ä¸‰ã€ç”¨æˆ·ç«¯å¦‚ä½•æ›´æ–°

1. ç”¨æˆ·å¯åŠ¨åº”ç”¨åï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥æ›´æ–°
2. å¦‚æœæœ‰æ–°ç‰ˆæœ¬ï¼Œä¼šå¼¹å‡ºæç¤º
3. ç”¨æˆ·ç‚¹å‡»"ä¸‹è½½æ›´æ–°"
4. ä¸‹è½½å®Œæˆåï¼Œæç¤ºå®‰è£…
5. å®‰è£…åè‡ªåŠ¨é‡å¯

---

## å››ã€å¸¸è§é—®é¢˜

### Q: å‘å¸ƒå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ï¼š
- GH_TOKEN æ˜¯å¦æ­£ç¡®è®¾ç½®
- GitHub ç”¨æˆ·åå’Œä»“åº“åæ˜¯å¦æ­£ç¡®
- ç½‘ç»œæ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•æŸ¥çœ‹å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼Ÿ
A: æ‰“å¼€ `https://github.com/ä½ çš„ç”¨æˆ·å/finance-system/releases`

### Q: å¦‚ä½•åˆ é™¤é”™è¯¯å‘å¸ƒçš„ç‰ˆæœ¬ï¼Ÿ
A: åœ¨ GitHub Releases é¡µé¢ç‚¹å‡»ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡» Delete

---

## äº”ã€å¿«é€Ÿå‘å¸ƒè„šæœ¬

åˆ›å»º `å‘å¸ƒ.ps1` è„šæœ¬ï¼ˆä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š

```powershell
# å‘å¸ƒ.ps1 - ä¸€é”®å‘å¸ƒè„šæœ¬

param(
    [string]$Version = "",
    [string]$Message = "å‘å¸ƒæ–°ç‰ˆæœ¬"
)

if ($Version -eq "") {
    Write-Host "è¯·è¾“å…¥ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ï¼š.\å‘å¸ƒ.ps1 -Version 1.0.1" -ForegroundColor Red
    exit 1
}

Write-Host "=== å¼€å§‹å‘å¸ƒ v$Version ===" -ForegroundColor Cyan

# 1. æ›´æ–°ç‰ˆæœ¬å·
$packageJson = Get-Content "desktop\package.json" -Raw | ConvertFrom-Json
$packageJson.version = $Version
$packageJson | ConvertTo-Json -Depth 10 | Set-Content "desktop\package.json"
Write-Host "âœ“ ç‰ˆæœ¬å·å·²æ›´æ–°ä¸º $Version" -ForegroundColor Green

# 2. æ„å»ºå‰ç«¯
Write-Host "æ„å»ºå‰ç«¯..." -ForegroundColor Yellow
cd frontend
npm run build
cd ..

# 3. å¤åˆ¶èµ„æº
Write-Host "å¤åˆ¶èµ„æº..." -ForegroundColor Yellow
cd desktop
Remove-Item -Path "resources\frontend" -Recurse -Force -ErrorAction SilentlyContinue
Copy-Item -Path "..\frontend\.next\standalone" -Destination "resources\frontend" -Recurse -Force
Copy-Item -Path "..\frontend\.next\static" -Destination "resources\frontend\.next\static" -Recurse -Force
Copy-Item -Path "..\frontend\public" -Destination "resources\frontend\public" -Recurse -Force

# 4. æ‰“åŒ…å¹¶å‘å¸ƒ
Write-Host "æ‰“åŒ…å¹¶å‘å¸ƒåˆ° GitHub..." -ForegroundColor Yellow
npm run dist -- --publish always

Write-Host "=== å‘å¸ƒå®Œæˆï¼===" -ForegroundColor Green

# 5. æäº¤ Git
cd ..
git add .
git commit -m "$Message v$Version"
git push
```

ä½¿ç”¨æ–¹æ³•ï¼š
```powershell
.\å‘å¸ƒ.ps1 -Version 1.0.1 -Message "ä¿®å¤äº†xxxé—®é¢˜"
```

